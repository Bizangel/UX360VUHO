<krpano>
	
	<!-- Temporary UI -->
	<!-- Visually sets the floor ui on and off 
	param: val on/off -->
	<action name="set_floor_ui" scope="local" args="nfloor, onoff">
		calc(floorname_ui,'floor' + nfloor + 'ui');
		copy(floorname,layer[get(floorname_ui)].url);
		indexoftxt(i,get(floorname),'floor');
		add(i,6);
		calc(floorurlbase,slice(floorname,0,i));
		calc(layer[get(floorname_ui)].url,floorurlbase+onoff+'.png');
	</action>
	
	<action name="set_starting_ui" scope="local" autorun="onstart">
		set_floor_ui(1,on);
		set_madera_ui(1,on);
	</action>
	
	<action name="switch_floor_ui" scope="local" args="nfloor">
		if(nfloor == 1,
			set_floor_ui(1,on); set_floor_ui(2,off);
			change_floor(claro);
		);
		if(nfloor == 2,
			set_floor_ui(2,on); set_floor_ui(1,off);
			change_floor(oscuro);
		);
	</action>
	
	<action name="off_all_floor_ui" scope="local">
		set_floor_ui(1,off); set_floor_ui(2,off);
		set(layer[floor1ui].enabled,false); tween(layer[floor1ui].alpha,0);
		set(layer[floor2ui].enabled,false); tween(layer[floor2ui].alpha,0);
	</action>
	
	<action name="enable_floor_ui" scope="local">
		set(layer[floor1ui].enabled,true); tween(layer[floor1ui].alpha,1);
		set(layer[floor2ui].enabled,true); tween(layer[floor2ui].alpha,1);
	</action>
	
	
	
	<layer name="floor1ui" type="image" url="%VIEWER%/icons/floor1off.png" keep="true" x="-15%" y="35%" align="centered" scale="0.09" 
		onclick="switch_floor_ui(1);" enabled="true" alpha="1" devices="desktop"/>
	
	<layer name="floor2ui" type="image" url="%VIEWER%/icons/floor2off.png" keep="true" x="-10%" y="35%" align="centered" scale="0.09" 
		onclick="switch_floor_ui(2);"  enabled="true" alpha="1" devices="desktop"/>
	
	<layer name="floor1ui" type="image" url="%VIEWER%/icons/floor1off.png" keep="true" x="-20%" y="30%" align="centered" scale="0.05" 
		onclick="switch_floor_ui(1);" enabled="true" alpha="1" devices="handheld"/>
	
	<layer name="floor2ui" type="image" url="%VIEWER%/icons/floor2off.png" keep="true" x="-10%" y="30%" align="centered" scale="0.05" 
		onclick="switch_floor_ui(2);"  enabled="true" alpha="1" devices="handheld"/>
		
		
	<!-- same but madera UI version use mader to not think about indexes -->
	
	<action name="set_madera_ui" scope="local" args="nfloor, onoff">
		calc(floorname_ui,'madera' + nfloor + 'ui');
		copy(floorname,layer[get(floorname_ui)].url);
		indexoftxt(i,get(floorname),'madera');
		add(i,7);
		calc(floorurlbase,slice(floorname,0,i));
		calc(layer[get(floorname_ui)].url,floorurlbase+onoff+'.png');
	</action>
	
	<action name="switch_madera_ui" scope="local" args="nfloor">
		if(nfloor == 1,
			set_madera_ui(1,on); set_madera_ui(2,off);
			change_mueble(claro);
		);
		if(nfloor == 2,
			set_madera_ui(2,on); set_madera_ui(1,off);
			change_mueble(oscuro);
		);
	</action>
	
	<action name="off_all_madera_ui" scope="local">
		set_madera_ui(1,off); set_madera_ui(2,off);
		set(layer[madera1ui].enabled,false); tween(layer[madera1ui].alpha,0);
		set(layer[madera2ui].enabled,false); tween(layer[madera2ui].alpha,0);
	</action>
	
	<action name="enable_madera_ui" scope="local">
		set(layer[madera1ui].enabled,true); tween(layer[madera1ui].alpha,1);
		set(layer[madera2ui].enabled,true); tween(layer[madera2ui].alpha,1);
	</action>
	
	
	
	<layer name="madera1ui" type="image" url="%VIEWER%/icons/madera1off.png" keep="true" x="+10%" y="35%" align="centered" scale="0.09" 
		onclick="switch_madera_ui(1);" enabled="true" alpha="1" devices="desktop"/>
	
	<layer name="madera2ui" type="image" url="%VIEWER%/icons/madera2off.png" keep="true" x="+15%" y="35%" align="centered" scale="0.09" 
		onclick="switch_madera_ui(2);"  enabled="true" alpha="1" devices="desktop"/>
	
	<layer name="madera1ui" type="image" url="%VIEWER%/icons/madera1off.png" keep="true" x="+10%" y="30%" align="centered" scale="0.05" 
		onclick="switch_madera_ui(1);" enabled="true" alpha="1" devices="handheld"/>
	
	<layer name="madera2ui" type="image" url="%VIEWER%/icons/madera2off.png" keep="true" x="+20%" y="30%" align="centered" scale="0.05" 
		onclick="switch_madera_ui(2);"  enabled="true" alpha="1" devices="handheld"/>
	
	
</krpano>